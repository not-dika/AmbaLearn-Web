{% extends "base.html" %}

{% block title %}Courses - AmbaLearn{% endblock %}

{% block app_bar_content %}
    <a href="{{ url_for('homepage') }}" class="back-button">
        <span class="material-icons">arrow_back</span>
    </a>
    <span class="title">Courses</span>
{% endblock %}

{% block drawer_content %}{% endblock %}
{% block drawer_footer %}{% endblock %}

{% block page_content %}
<div class="courses-grid">
    {% for course in courses %}
    <div class="course-card">
        <a href="{{ url_for('lessons', course_uid=course.uid) }}">
            <img src="{{ course.image }}" alt="{{ course.course_title }}">
            <div class="course-card-title">
                {{ course.course_title }}
            </div>
        </a>
    </div>
    {% else %}
    <p>No courses found. Generate one!</p>
    {% endfor %}
</div>

<div class="dialog-overlay" id="dialog-overlay">
    <div class="dialog-box">
        <h3>Generate New Course</h3>
        <form action="{{ url_for('generate_course') }}" method="POST">
            <div class="form-group">
                <input type="text" name="topic" placeholder="Topic (e.g., Introduction to Python)" required>
            </div>
            <div class="dialog-actions">
                <button type="button" class="btn btn-secondary" id="dialog-close-btn">Back</button>
                <button type="submit" class="btn btn-primary">Generate Course</button>
            </div>
        </form>
    </div>
</div>

<button class="fab" id="fab-add-course">
    <span class="material-icons">add</span>
</button>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const fab = document.getElementById('fab-add-course');
        const dialog = document.getElementById('dialog-overlay');
        const closeBtn = document.getElementById('dialog-close-btn');

        fab.addEventListener('click', () => {
            dialog.style.display = 'flex';
        });
        closeBtn.addEventListener('click', () => {
            dialog.style.display = 'none';
        });
        dialog.addEventListener('click', (e) => {
            if (e.target === dialog) {
                dialog.style.display = 'none';
            }
        });
    });
</script>
{% endblock %}

{% block input_bar %}{% endblock %}